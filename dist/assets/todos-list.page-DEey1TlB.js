import{J as T,K as No,f as O,a as _,d as Q,k as q,c as Ue,j as e,U as _o,L as ae,t as D,M as He,N as U,Q as We,l as Xe,g as Do,b as Ye,R as Qe,V as qe,W as Ro,X as Ze,Y as zo,Z as Je,_ as Ke,$ as eo,a0 as fe,a1 as Mo,a2 as $o,a3 as Eo,a4 as Go,a5 as Oo,a6 as Bo,a7 as Lo,a8 as Fo,a9 as Vo,aa as Ao,ab as ze,ac as Uo,ad as me,ae as Ho,af as Wo,ag as Xo,ah as Me,ai as $e,i as Yo,aj as Qo,ak as oo,al as xe,am as Ee,u as ve,y as ge,x as ye,o as je,C as qo,S as de,G as A,T as G,h as ie,I as Zo,an as to,r as so,D as Jo,P as Ko,ao as et,p as ot,F as tt,ap as st,aq as rt,H as at,ar as nt}from"./index-BHNp474o.js";import{I as lt,g as ro,a as it,b as ct,S as dt,u as Ge,c as Oe,d as Be}from"./ui.store-B676nCF1.js";import{P as ut}from"./primary.button-B0N-mZMw.js";import{a as ao,b as no,u as pt}from"./todo.hooks-Cd_V3NLm.js";import{g as lo,o as io}from"./delete.modal-BHTOxTUZ.js";import{B as co}from"./Badge-Bm00rCxW.js";import{M as re}from"./Menu-p0F1KV6m.js";import{I as uo}from"./InputBase-BeZN-MFe.js";import{C as po,S as ht}from"./Select-xjuUw3lp.js";import{a as mt}from"./todoList.hooks-BCb8ES7F.js";import{P as ft}from"./page.layout-D3elAzk0.js";import{T as xt}from"./Title-K7XM02dH.js";import{T as bt}from"./TextInput-CHlh6L20.js";import{m as Le}from"./proxy-BjGfTHrT.js";import{G as Fe}from"./Grid-BVen_zSR.js";import"./create-scoped-keydown-handler-BlqFPyLh.js";const ho=T.createContext(null),vt=ho.Provider,mo=()=>T.useContext(ho),[gt,yt]=No();var fo={card:"m_26775b0a"};const jt={withBorder:!0},Ct=q((o,{radius:s})=>({card:{"--card-radius":ae(s)}})),Ce=O((o,s)=>{const t=_("CheckboxCard",jt,o),{classNames:a,className:r,style:c,styles:n,unstyled:l,vars:p,checked:h,mod:u,withBorder:f,value:v,onClick:d,defaultChecked:g,onChange:x,attributes:b,...C}=t,k=Q({name:"CheckboxCard",classes:fo,props:t,className:r,style:c,classNames:a,styles:n,unstyled:l,attributes:b,vars:p,varsResolver:Ct,rootSelector:"card"}),i=mo(),w=typeof h=="boolean"?h:i?i.value.includes(v||""):void 0,[y,S]=Ue({value:w,defaultValue:g,finalValue:!1,onChange:x});return e.jsx(gt,{value:{checked:y},children:e.jsx(_o,{ref:s,mod:[{"with-border":f,checked:y},u],...k("card"),...C,role:"checkbox","aria-checked":y,onClick:P=>{d?.(P),i?.onChange(v||""),S(!y)}})})});Ce.displayName="@mantine/core/CheckboxCard";Ce.classes=fo;const we=O((o,s)=>{const{value:t,defaultValue:a,onChange:r,size:c,wrapperProps:n,children:l,readOnly:p,disabled:h,...u}=_("CheckboxGroup",null,o),[f,v]=Ue({value:t,defaultValue:a,finalValue:[],onChange:r}),d=g=>{const x=typeof g=="string"?g:g.currentTarget.value;!p&&v(f.includes(x)?f.filter(b=>b!==x):[...f,x])};return e.jsx(vt,{value:{value:f,onChange:d,size:c,disabled:h},children:e.jsx(uo.Wrapper,{size:c,ref:s,...n,...u,labelElement:"div",__staticSelector:"CheckboxGroup",children:e.jsx(lt,{role:"group",children:l})})})});we.classes=uo.Wrapper.classes;we.displayName="@mantine/core/CheckboxGroup";var xo={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const wt={icon:po,variant:"filled"},Tt=q((o,{radius:s,color:t,size:a,iconColor:r,variant:c,autoContrast:n})=>{const l=He({color:t||o.primaryColor,theme:o}),p=l.isThemeColor&&l.shade===void 0?`var(--mantine-color-${l.color}-outline)`:l.color;return{indicator:{"--checkbox-size":Xe(a,"checkbox-size"),"--checkbox-radius":s===void 0?void 0:ae(s),"--checkbox-color":c==="outline"?p:U(t,o),"--checkbox-icon-color":r?U(r,o):ro(n,o)?We({color:t,theme:o,autoContrast:n}):void 0}}}),Te=O((o,s)=>{const t=_("CheckboxIndicator",wt,o),{classNames:a,className:r,style:c,styles:n,unstyled:l,vars:p,icon:h,indeterminate:u,radius:f,color:v,iconColor:d,autoContrast:g,checked:x,mod:b,variant:C,disabled:k,attributes:i,...w}=t,y=Q({name:"CheckboxIndicator",classes:xo,props:t,className:r,style:c,classNames:a,styles:n,unstyled:l,attributes:i,vars:p,varsResolver:Tt,rootSelector:"indicator"}),S=yt(),P=typeof x=="boolean"||typeof u=="boolean"?x||u:S?.checked||!1;return e.jsx(D,{ref:s,...y("indicator",{variant:C}),variant:C,mod:[{checked:P,disabled:k},b],...w,children:e.jsx(h,{indeterminate:u,...y("icon")})})});Te.displayName="@mantine/core/CheckboxIndicator";Te.classes=xo;var bo={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const kt={labelPosition:"right",icon:po,variant:"filled"},St=q((o,{radius:s,color:t,size:a,iconColor:r,variant:c,autoContrast:n})=>{const l=He({color:t||o.primaryColor,theme:o}),p=l.isThemeColor&&l.shade===void 0?`var(--mantine-color-${l.color}-outline)`:l.color;return{root:{"--checkbox-size":Xe(a,"checkbox-size"),"--checkbox-radius":s===void 0?void 0:ae(s),"--checkbox-color":c==="outline"?p:U(t,o),"--checkbox-icon-color":r?U(r,o):ro(n,o)?We({color:t,theme:o,autoContrast:n}):void 0}}}),te=O((o,s)=>{const t=_("Checkbox",kt,o),{classNames:a,className:r,style:c,styles:n,unstyled:l,vars:p,color:h,label:u,id:f,size:v,radius:d,wrapperProps:g,checked:x,labelPosition:b,description:C,error:k,disabled:i,variant:w,indeterminate:y,icon:S,rootRef:P,iconColor:H,onChange:B,autoContrast:W,mod:L,attributes:F,...M}=t,I=mo(),se=v||I?.size,V=Q({name:"Checkbox",props:t,classes:bo,className:r,style:c,classNames:a,styles:n,unstyled:l,attributes:F,vars:p,varsResolver:St}),{styleProps:J,rest:$}=Do(M),K=Ye(f),R={checked:I?.value.includes($.value)??x,onChange:z=>{I?.onChange(z),B?.(z)},disabled:I?.disabled??i},ee=T.useRef(null),N=s||ee;return T.useEffect(()=>{N&&"current"in N&&N.current&&(N.current.indeterminate=y||!1,y?N.current.setAttribute("data-indeterminate","true"):N.current.removeAttribute("data-indeterminate"))},[y,N]),e.jsx(it,{...V("root"),__staticSelector:"Checkbox",__stylesApiProps:t,id:K,size:se,labelPosition:b,label:u,description:C,error:k,disabled:R.disabled,classNames:a,styles:n,unstyled:l,"data-checked":R.checked||x||void 0,variant:w,ref:P,mod:L,...J,...g,children:e.jsxs(D,{...V("inner"),mod:{"data-label-position":b},children:[e.jsx(D,{component:"input",id:K,ref:N,mod:{error:!!k},...V("input",{focusable:!0,variant:w}),...$,...R,type:"checkbox"}),e.jsx(S,{indeterminate:y,...V("icon")})]})})});te.classes={...bo,...ct};te.displayName="@mantine/core/Checkbox";te.Group=we;te.Indicator=Te;te.Card=Ce;const Pt={duration:100,transition:"fade"};function Ve(o,s){return{...Pt,...s,...o}}function It({offset:o,position:s,defaultOpened:t}){const[a,r]=T.useState(t),c=T.useRef(null),{x:n,y:l,elements:p,refs:h,update:u,placement:f}=Qe({placement:s,middleware:[qe({crossAxis:!0,padding:5,rootBoundary:"document"})]}),v=f.includes("right")?o:s.includes("left")?o*-1:0,d=f.includes("bottom")?o:s.includes("top")?o*-1:0,g=T.useCallback(({clientX:x,clientY:b})=>{h.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x,y:b,left:x+v,top:b+d,right:x,bottom:b}}})},[p.reference]);return T.useEffect(()=>{if(h.floating.current){const x=c.current;x.addEventListener("mousemove",g);const b=Ro(h.floating.current);return b.forEach(C=>{C.addEventListener("scroll",u)}),()=>{x.removeEventListener("mousemove",g),b.forEach(C=>{C.removeEventListener("scroll",u)})}}},[p.reference,h.floating.current,u,g,a]),{handleMouseMove:g,x:n,y:l,opened:a,setOpened:r,boundaryRef:c,floating:h.setFloating}}var ue={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const Nt={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Ze("popover")},_t=q((o,{radius:s,color:t})=>({tooltip:{"--tooltip-radius":s===void 0?void 0:ae(s),"--tooltip-bg":t?U(t,o):void 0,"--tooltip-color":t?"var(--mantine-color-white)":void 0}})),ke=O((o,s)=>{const t=_("TooltipFloating",Nt,o),{children:a,refProp:r,withinPortal:c,style:n,className:l,classNames:p,styles:h,unstyled:u,radius:f,color:v,label:d,offset:g,position:x,multiline:b,zIndex:C,disabled:k,defaultOpened:i,variant:w,vars:y,portalProps:S,attributes:P,...H}=t,B=zo(),W=Q({name:"TooltipFloating",props:t,classes:ue,className:l,style:n,classNames:p,styles:h,unstyled:u,attributes:P,rootSelector:"tooltip",vars:y,varsResolver:_t}),{handleMouseMove:L,x:F,y:M,opened:I,boundaryRef:se,floating:V,setOpened:J}=It({offset:g,position:x,defaultOpened:i}),$=Je(a);if(!$)throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const K=Ke(se,eo($),s),R=$.props,ee=z=>{R.onMouseEnter?.(z),L(z),J(!0)},N=z=>{R.onMouseLeave?.(z),J(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(fe,{...S,withinPortal:c,children:e.jsx(D,{...H,...W("tooltip",{style:{...Mo(n,B),zIndex:C,display:!k&&I?"block":"none",top:(M&&Math.round(M))??"",left:(F&&Math.round(F))??""}}),variant:w,ref:V,mod:{multiline:b},children:d})}),T.cloneElement($,{...R,[r]:K,onMouseEnter:ee,onMouseLeave:N})]})});ke.classes=ue;ke.displayName="@mantine/core/TooltipFloating";const vo=T.createContext(!1),Dt=vo.Provider,Rt=()=>T.useContext(vo),zt={openDelay:0,closeDelay:0};function Se(o){const{openDelay:s,closeDelay:t,children:a}=_("TooltipGroup",zt,o);return e.jsx(Dt,{value:!0,children:e.jsx($o,{delay:{open:s,close:t},children:a})})}Se.displayName="@mantine/core/TooltipGroup";Se.extend=o=>o;function Mt(o){if(o===void 0)return{shift:!0,flip:!0};const s={...o};return o.shift===void 0&&(s.shift=!0),o.flip===void 0&&(s.flip=!0),s}function $t(o){const s=Mt(o.middlewares),t=[Ao(o.offset)];return s.shift&&t.push(qe(typeof s.shift=="boolean"?{padding:8}:{padding:8,...s.shift})),s.flip&&t.push(typeof s.flip=="boolean"?ze():ze(s.flip)),t.push(Uo({element:o.arrowRef,padding:o.arrowOffset})),s.inline?t.push(typeof s.inline=="boolean"?me():me(s.inline)):o.inline&&t.push(me()),t}function Et(o){const[s,t]=T.useState(o.defaultOpened),r=typeof o.opened=="boolean"?o.opened:s,c=Rt(),n=Ye(),l=T.useCallback(y=>{t(y),y&&C(n)},[n]),{x:p,y:h,context:u,refs:f,placement:v,middlewareData:{arrow:{x:d,y:g}={}}}=Qe({strategy:o.strategy,placement:o.position,open:r,onOpenChange:l,middleware:$t(o),whileElementsMounted:Ho}),{delay:x,currentId:b,setCurrentId:C}=Eo(u,{id:n}),{getReferenceProps:k,getFloatingProps:i}=Go([Oo(u,{enabled:o.events?.hover,delay:c?x:{open:o.openDelay,close:o.closeDelay},mouseOnly:!o.events?.touch}),Bo(u,{enabled:o.events?.focus,visibleOnly:!0}),Lo(u,{role:"tooltip"}),Fo(u,{enabled:typeof o.opened>"u"})]);Vo(()=>{o.onPositionChange?.(v)},[v]);const w=r&&b&&b!==n;return{x:p,y:h,arrowX:d,arrowY:g,reference:f.setReference,floating:f.setFloating,getFloatingProps:i,getReferenceProps:k,isGroupPhase:w,opened:r,placement:v}}const Ae={position:"top",refProp:"ref",withinPortal:!0,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Ze("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},Gt=q((o,{radius:s,color:t,variant:a,autoContrast:r})=>{const c=o.variantColorResolver({theme:o,color:t||o.primaryColor,autoContrast:r,variant:a||"filled"});return{tooltip:{"--tooltip-radius":s===void 0?void 0:ae(s),"--tooltip-bg":t?c.background:void 0,"--tooltip-color":t?c.color:void 0}}}),Y=O((o,s)=>{const t=_("Tooltip",Ae,o),{children:a,position:r,refProp:c,label:n,openDelay:l,closeDelay:p,onPositionChange:h,opened:u,defaultOpened:f,withinPortal:v,radius:d,color:g,classNames:x,styles:b,unstyled:C,style:k,className:i,withArrow:w,arrowSize:y,arrowOffset:S,arrowRadius:P,arrowPosition:H,offset:B,transitionProps:W,multiline:L,events:F,zIndex:M,disabled:I,positionDependencies:se,onClick:V,onMouseEnter:J,onMouseLeave:$,inline:K,variant:R,keepMounted:ee,vars:N,portalProps:z,mod:Ne,floatingStrategy:pe,middlewares:To,autoContrast:Xt,attributes:ko,target:E,..._e}=_("Tooltip",Ae,t),{dir:So}=Wo(),he=T.useRef(null),j=Et({position:Xo(So,r),closeDelay:p,openDelay:l,onPositionChange:h,opened:u,defaultOpened:f,events:F,arrowRef:he,arrowOffset:S,offset:typeof B=="number"?B+(w?y/2:0):B,positionDependencies:[...se,E??a],inline:K,strategy:pe,middlewares:To});T.useEffect(()=>{const X=E instanceof HTMLElement?E:typeof E=="string"?document.querySelector(E):E?.current||null;X&&j.reference(X)},[E,j]);const oe=Q({name:"Tooltip",props:t,classes:ue,className:i,style:k,classNames:x,styles:b,unstyled:C,attributes:ko,rootSelector:"tooltip",vars:N,varsResolver:Gt}),le=Je(a);if(!E&&!le)return null;if(E){const X=Ve(W,{duration:100,transition:"fade"});return e.jsx(e.Fragment,{children:e.jsx(fe,{...z,withinPortal:v,children:e.jsx(Me,{...X,keepMounted:ee,mounted:!I&&!!j.opened,duration:j.isGroupPhase?10:X.duration,children:Io=>e.jsxs(D,{..._e,"data-fixed":pe==="fixed"||void 0,variant:R,mod:[{multiline:L},Ne],...j.getFloatingProps({ref:j.floating,className:oe("tooltip").className,style:{...oe("tooltip").style,...Io,zIndex:M,top:j.y??0,left:j.x??0}}),children:[n,e.jsx($e,{ref:he,arrowX:j.arrowX,arrowY:j.arrowY,visible:w,position:j.placement,arrowSize:y,arrowOffset:S,arrowRadius:P,arrowPosition:H,...oe("arrow")})]})})})})}const De=le.props,Po=Ke(j.reference,eo(le),s),Re=Ve(W,{duration:100,transition:"fade"});return e.jsxs(e.Fragment,{children:[e.jsx(fe,{...z,withinPortal:v,children:e.jsx(Me,{...Re,keepMounted:ee,mounted:!I&&!!j.opened,duration:j.isGroupPhase?10:Re.duration,children:X=>e.jsxs(D,{..._e,"data-fixed":pe==="fixed"||void 0,variant:R,mod:[{multiline:L},Ne],...j.getFloatingProps({ref:j.floating,className:oe("tooltip").className,style:{...oe("tooltip").style,...X,zIndex:M,top:j.y??0,left:j.x??0}}),children:[n,e.jsx($e,{ref:he,arrowX:j.arrowX,arrowY:j.arrowY,visible:w,position:j.placement,arrowSize:y,arrowOffset:S,arrowRadius:P,arrowPosition:H,...oe("arrow")})]})})}),T.cloneElement(le,j.getReferenceProps({onClick:V,onMouseEnter:J,onMouseLeave:$,onMouseMove:t.onMouseMove,onPointerDown:t.onPointerDown,onPointerEnter:t.onPointerEnter,...De,className:Yo(i,De.className),[c]:Po}))]})});Y.classes=ue;Y.displayName="@mantine/core/Tooltip";Y.Floating=ke;Y.Group=Se;const[Ot,Bt]=Qo("Table component was not found in the tree");var ne={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function Lt(o,s){if(!s)return;const t={};return s.columnBorder&&o.withColumnBorders&&(t["data-with-column-border"]=!0),s.rowBorder&&o.withRowBorders&&(t["data-with-row-border"]=!0),s.striped&&o.striped&&(t["data-striped"]=o.striped),s.highlightOnHover&&o.highlightOnHover&&(t["data-hover"]=!0),s.captionSide&&o.captionSide&&(t["data-side"]=o.captionSide),s.stickyHeader&&o.stickyHeader&&(t["data-sticky"]=!0),t}function Z(o,s){const t=`Table${o.charAt(0).toUpperCase()}${o.slice(1)}`,a=O((r,c)=>{const n=_(t,{},r),{classNames:l,className:p,style:h,styles:u,...f}=n,v=Bt();return e.jsx(D,{component:o,ref:c,...Lt(v,s),...v.getStyles(o,{className:p,classNames:l,style:h,styles:u,props:n}),...f})});return a.displayName=`@mantine/core/${t}`,a.classes=ne,a}const be=Z("th",{columnBorder:!0}),go=Z("td",{columnBorder:!0}),ce=Z("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),yo=Z("thead",{stickyHeader:!0}),jo=Z("tbody"),Co=Z("tfoot"),wo=Z("caption",{captionSide:!0});function Pe({data:o}){return e.jsxs(e.Fragment,{children:[o.caption&&e.jsx(wo,{children:o.caption}),o.head&&e.jsx(yo,{children:e.jsx(ce,{children:o.head.map((s,t)=>e.jsx(be,{children:s},t))})}),o.body&&e.jsx(jo,{children:o.body.map((s,t)=>e.jsx(ce,{children:s.map((a,r)=>e.jsx(go,{children:a},r))},t))}),o.foot&&e.jsx(Co,{children:e.jsx(ce,{children:o.foot.map((s,t)=>e.jsx(be,{children:s},t))})})]})}Pe.displayName="@mantine/core/TableDataRenderer";const Ft={type:"scrollarea"},Vt=q((o,{minWidth:s,maxHeight:t,type:a})=>({scrollContainer:{"--table-min-width":xe(s),"--table-max-height":xe(t),"--table-overflow":a==="native"?"auto":void 0}})),Ie=O((o,s)=>{const t=_("TableScrollContainer",Ft,o),{classNames:a,className:r,style:c,styles:n,unstyled:l,vars:p,children:h,minWidth:u,maxHeight:f,type:v,scrollAreaProps:d,attributes:g,...x}=t,b=Q({name:"TableScrollContainer",classes:ne,props:t,className:r,style:c,classNames:a,styles:n,unstyled:l,attributes:g,vars:p,varsResolver:Vt,rootSelector:"scrollContainer"});return e.jsx(D,{component:v==="scrollarea"?oo:"div",...v==="scrollarea"?f?{offsetScrollbars:"xy",...d}:{offsetScrollbars:"x",...d}:{},ref:s,...b("scrollContainer"),...x,children:e.jsx("div",{...b("scrollContainerInner"),children:h})})});Ie.classes=ne;Ie.displayName="@mantine/core/TableScrollContainer";const At={withRowBorders:!0,verticalSpacing:7},Ut=q((o,{layout:s,captionSide:t,horizontalSpacing:a,verticalSpacing:r,borderColor:c,stripedColor:n,highlightOnHoverColor:l,striped:p,highlightOnHover:h,stickyHeaderOffset:u,stickyHeader:f})=>({table:{"--table-layout":s,"--table-caption-side":t,"--table-horizontal-spacing":Ee(a),"--table-vertical-spacing":Ee(r),"--table-border-color":c?U(c,o):void 0,"--table-striped-color":p&&n?U(n,o):void 0,"--table-highlight-on-hover-color":h&&l?U(l,o):void 0,"--table-sticky-header-offset":f?xe(u):void 0}})),m=O((o,s)=>{const t=_("Table",At,o),{classNames:a,className:r,style:c,styles:n,unstyled:l,vars:p,horizontalSpacing:h,verticalSpacing:u,captionSide:f,stripedColor:v,highlightOnHoverColor:d,striped:g,highlightOnHover:x,withColumnBorders:b,withRowBorders:C,withTableBorder:k,borderColor:i,layout:w,variant:y,data:S,children:P,stickyHeader:H,stickyHeaderOffset:B,mod:W,tabularNums:L,attributes:F,...M}=t,I=Q({name:"Table",props:t,className:r,style:c,classes:ne,classNames:a,styles:n,unstyled:l,attributes:F,rootSelector:"table",vars:p,varsResolver:Ut});return e.jsx(Ot,{value:{getStyles:I,stickyHeader:H,striped:g===!0?"odd":g||void 0,highlightOnHover:x,withColumnBorders:b,withRowBorders:C,captionSide:f||"bottom"},children:e.jsx(D,{component:"table",variant:y,ref:s,mod:[{"data-with-table-border":k,"data-tabular-nums":L},W],...I("table"),...M,children:P||!!S&&e.jsx(Pe,{data:S})})})});m.classes=ne;m.displayName="@mantine/core/Table";m.Td=go;m.Th=be;m.Tr=ce;m.Thead=yo;m.Tbody=jo;m.Tfoot=Co;m.Caption=wo;m.ScrollContainer=Ie;m.DataRenderer=Pe;const Ht=({todo:o})=>{const{t:s}=ve(),t=ge(),{todoListId:a}=ye(),r=je(u=>u.currentUser),{mutate:c}=ao(),{mutate:n}=no(),l=u=>{u.stopPropagation(),c({todoId:o.id,completed:!o.completed})},p=()=>{t(`/user/${r?.id}/todo-lists/${a}/todos/${o.id}`)},h=()=>{io({t:s,onConfirm:()=>n(o.id)})};return e.jsx(qo,{shadow:"sm",padding:"md",radius:"md",withBorder:!0,h:200,className:"transition-all duration-200 hover:shadow-lg",style:{backgroundColor:o.completed?"rgba(0, 0, 0, 0.1)":void 0},children:e.jsxs(de,{gap:"sm",h:"100%",justify:"space-between",style:{opacity:o.completed?.6:1},children:[e.jsxs(A,{justify:"space-between",align:"flex-start",children:[e.jsxs(de,{gap:4,style:{flex:1},children:[e.jsx(G,{fw:600,size:"lg",td:o.completed?"line-through":void 0,lineClamp:1,children:o.title}),e.jsx(G,{size:"sm",c:"dimmed",lineClamp:2,td:o.completed?"line-through":void 0,children:o.description})]}),e.jsxs(A,{gap:"xs",style:{opacity:1},children:[e.jsx(co,{color:lo(o.priority),variant:"light",size:"sm",children:o.priority}),e.jsxs(re,{shadow:"md",width:200,children:[e.jsx(re.Target,{children:e.jsx(ie,{variant:"subtle",color:"gray",size:"sm",children:e.jsx(Zo,{size:16})})}),e.jsxs(re.Dropdown,{children:[e.jsx(re.Item,{leftSection:e.jsx(to,{size:16}),onClick:p,children:s("actions.view_details")}),e.jsx(re.Item,{color:"red",leftSection:e.jsx(so,{size:16}),onClick:h,children:s("actions.delete")})]})]})]})]}),e.jsxs(A,{justify:"space-between",align:"center",children:[e.jsxs(A,{gap:"xs",children:[e.jsx(Jo,{size:14}),e.jsx(G,{size:"xs",c:"dimmed",children:new Date(o.dueDate).toLocaleDateString()})]}),e.jsx(dt,{checked:o.completed,onClick:l,size:"sm",style:{opacity:1}})]})]})})};function Wt({todos:o,isLoading:s,isError:t,error:a}){const{t:r}=ve(),c=ge(),{todoListId:n}=ye(),{mutate:l}=no(),{mutate:p}=ao(),h=je(d=>d.currentUser),u=d=>{c(`/user/${h?.id}/todo-lists/${n}/todos/${d}/edit`)},f=d=>{io({t:r,onConfirm:()=>l(d)})},v=(d,g)=>{p({todoId:d,completed:!g})};return e.jsxs(Ko,{children:[e.jsx(de,{className:"h-fit overflow-hidden",children:e.jsx(D,{pb:9,children:t&&e.jsx(G,{c:"red",size:"sm",children:a?.message||"Erreur lors du chargement"})})}),e.jsx(D,{className:"relative h-[calc(100vh-230px)]",children:e.jsx(oo,{className:"h-full overflow-auto rounded-md",children:e.jsxs(m,{children:[e.jsx(m.Thead,{className:"sticky top-0 z-10 bg-gray-50 shadow-[0_1px_0_0_rgba(0,0,0,0.1)]",children:e.jsxs(m.Tr,{children:[e.jsx(m.Th,{children:r("labels.status")}),e.jsx(m.Th,{children:r("labels.title")}),e.jsx(m.Th,{children:r("labels.description")}),e.jsx(m.Th,{children:r("labels.priority")}),e.jsx(m.Th,{children:r("labels.limited_date")}),e.jsx(m.Th,{children:r("labels.actions")})]})}),e.jsx(m.Tbody,{children:s?e.jsx(m.Tr,{children:e.jsx(m.Td,{colSpan:6,className:"text-center",children:e.jsx(et,{size:"sm"})})}):o.length===0?e.jsx(m.Tr,{children:e.jsx(m.Td,{colSpan:6,className:"text-center text-gray-500",children:r("labels.no_todo")})}):o.slice().reverse().map(d=>e.jsxs(m.Tr,{children:[e.jsx(m.Td,{children:e.jsx(te,{className:"cursor-pointer",checked:d.completed,onChange:()=>v(d.id,d.completed)})}),e.jsx(m.Td,{children:e.jsx(G,{fw:500,td:d.completed?"line-through":void 0,children:d.title})}),e.jsx(m.Td,{children:e.jsx(G,{size:"sm",lineClamp:2,children:d.description})}),e.jsx(m.Td,{children:e.jsx(co,{color:lo(d.priority),variant:"light",size:"sm",children:d.priority})}),e.jsx(m.Td,{children:e.jsx(G,{size:"sm",children:new Date(d.dueDate).toLocaleDateString()})}),e.jsx(m.Td,{children:e.jsxs(A,{gap:"xs",children:[e.jsx(Y,{withArrow:!0,label:"Voir les détails",children:e.jsx(ie,{variant:"subtle",color:"green","aria-label":"Voir",children:e.jsx(to,{size:16})})}),e.jsx(Y,{withArrow:!0,label:"Modifier",children:e.jsx(ie,{variant:"subtle",color:"blue",onClick:()=>u(d.id),"aria-label":"Éditer",children:e.jsx(ot,{size:16})})}),e.jsx(Y,{withArrow:!0,label:"Supprimer",children:e.jsx(ie,{variant:"subtle",color:"red",onClick:()=>f(d.id),"aria-label":"Supprimer",children:e.jsx(so,{size:16})})})]})})]},d.id))})]})})})]})}const ds=()=>{const{t:o}=ve(),s=ge(),{todoListId:t}=ye(),a=je(i=>i.currentUser),r=Ge(i=>i.tasksViewMode),[c,n]=T.useState("all"),[l,p]=T.useState(""),h=Ge(i=>i.setTasksViewMode),[u,f]=T.useState("dueDate"),{data:v}=mt(a?.id||0,Number(t)),{data:d=[],isLoading:g,isError:x,error:b}=pt(Number(t)),C=d.filter(i=>c==="completed"?i.completed:c==="pending"?!i.completed:!0).filter(i=>i.title.toLowerCase().includes(l.toLowerCase())||i.description.toLowerCase().includes(l.toLowerCase())).sort((i,w)=>{if(u==="dueDate")return new Date(i.dueDate).getTime()-new Date(w.dueDate).getTime();if(u==="priority"){const y={high:0,medium:1,low:2};return y[i.priority]-y[w.priority]}return i.title.localeCompare(w.title)}),k=()=>{s(`/user/${a?.id}/todo-lists/${t}/todos/new`)};return e.jsxs(ft,{children:[e.jsxs(tt,{justify:"space-between",align:"center",mb:"md",children:[e.jsxs(A,{align:"end",children:[e.jsxs(xt,{order:1,size:"h2",children:[o("titles.tasks_list")," ",o("labels.off_the_list")]}),e.jsx(G,{fw:500,children:v?.title}),e.jsxs(G,{size:"sm",c:"blue",children:["(",d.length," ",o("labels.todos"),d.length>1?"s":"",")"]})]}),e.jsxs(A,{children:[e.jsx(Oe,{color:"blue",value:r,onChange:i=>h(i),classNames:{root:"rounded-full!",indicator:"rounded-full!"},styles:{label:{minWidth:"120px"}},data:[{value:"card",label:e.jsx(Be,{icon:st,label:o("labels.cards")})},{value:"table",label:e.jsx(Be,{icon:rt,label:o("labels.table")})}]}),e.jsx(ut,{leftIcon:at,onClick:k,label:o("actions.create_todo")})]})]}),e.jsx(de,{gap:"md",mb:"md",children:e.jsxs(A,{children:[e.jsx(bt,{style:{flex:.5},placeholder:o("placeholders.search_tasks"),leftSection:e.jsx(nt,{size:18}),value:l,onChange:i=>p(i.target.value)}),e.jsx(ht,{style:{flex:.5},placeholder:o("actions.sort_by"),value:u,onChange:i=>f(i),data:[{value:"dueDate",label:o("labels.due_date")},{value:"priority",label:o("labels.priority")},{value:"title",label:o("labels.title")}]}),e.jsx(Oe,{w:400,value:c,style:{flex:1},onChange:i=>n(i),data:[{label:o("labels.all"),value:"all"},{label:o("labels.completed"),value:"completed"},{label:o("labels.pending"),value:"pending"}],classNames:{root:"rounded-full!",indicator:"rounded-full!"}})]})}),e.jsx(Le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},style:{flex:1,overflow:"hidden"},children:r==="table"?e.jsx(Wt,{todos:C,isLoading:g,isError:x,error:b}):e.jsx(Fe,{gutter:"md",children:C.map((i,w)=>e.jsx(Fe.Col,{span:{base:12,md:6,lg:4},children:e.jsx(Le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-30px"},transition:{duration:.3,delay:w*.05},children:e.jsx(Ht,{todo:i})})},i.id))})})]})};export{ds as default};
